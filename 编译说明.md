# GameServer.exe 编译说明

## 修改内容

已修改源码以实现全地图强制PVP功能：

1. **Night/GameServer/NNOFixup.c** - 添加了 `OVERRIDE_LATELINK_worldRegionGetType` 覆盖函数，强制所有区域类型返回 `WRT_PvP`
2. **Night/GameServer/NNOFixup.h** - 添加了函数声明

## 编译步骤

### 方法1：使用Visual Studio（推荐）

1. **打开解决方案文件**
   - 可以打开 `Night/GameServer/NNOGameServer.sln`（只包含GameServer项目）
   - 或者打开 `Night/MasterSolution/NNOClientServer.sln`（包含所有项目）

2. **选择配置**
   - 在Visual Studio顶部工具栏选择配置：
     - `Debug` - 调试版本
     - `Full Debug` - 完整调试版本（包含更多调试信息）

3. **编译项目**
   - 右键点击 "NNOGameServer" 项目
   - 选择 "生成" (Build) 或按 `Ctrl+Shift+B`
   - 编译完成后，可执行文件将生成在输出目录中

### 方法2：使用MSBuild命令行

1. **打开Visual Studio开发者命令提示符**
   - 在开始菜单搜索 "Developer Command Prompt for VS"
   - 或者使用 "x86 Native Tools Command Prompt"

2. **导航到解决方案目录**
   ```cmd
   cd I:\XXX\Night\GameServer
   ```

3. **编译项目**
   ```cmd
   msbuild NNOGameServer.sln /p:Configuration=Debug /p:Platform=Win32
   ```
   
   或者编译完整解决方案：
   ```cmd
   cd I:\XXX\Night\MasterSolution
   msbuild NNOClientServer.sln /p:Configuration=Debug /p:Platform=Win32 /t:NNOGameServer
   ```

4. **查找输出文件**
   - 编译完成后，`GameServer.exe` 通常会在 `bin` 目录或项目的输出目录中
   - 检查项目属性中的输出路径设置

### 编译配置说明

- **Configuration**: 
  - `Debug` - 生成 `GameServer.exe`
  - `Full Debug` - 生成 `GameServerFD.exe`

- **Platform**: `Win32` (32位)

## 注意事项

1. **依赖项目**：GameServer依赖多个库项目（AILib、ServerLib、WorldLib等），确保所有依赖项都已编译

2. **StructParser**：项目配置中包含PreBuild事件运行StructParser，确保路径正确

3. **编译顺序**：如果使用完整解决方案，库项目会自动按依赖顺序编译

4. **Visual Studio版本**：此项目使用Visual Studio 2010格式，建议使用VS 2010或更高版本

## 验证修改

编译成功后，运行GameServer.exe，所有地图区域应该都被视为PVP区域，玩家可以在任何地图上互相攻击。

